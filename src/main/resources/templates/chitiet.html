<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      lang="vi">
      <head>
<title
	th:text="${sp.tenSP} + ' | Thi√™n Nhi√™n Garden - C√¢y C·∫£nh & Hoa T∆∞∆°i'">Chi
	ti·∫øt s·∫£n ph·∫©m</title>
	    <link rel="stylesheet" th:href="@{/css/chitiet.css}">
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Quicksand:wght@400;500;600;700&display=swap"
          rel="stylesheet">
</head>

<body>
<section layout:fragment="content">
	<section class="product-detail">
		<div class="gallery">
			<img id="mainImage" class="main-img"
				th:src="@{'/images/' + ${sp.anhChinh}}" th:alt="${sp.tenSP}">
			<div class="thumbs">
				<img class="thumb-small" th:each="img : ${hinhAnhs}"
					th:src="@{'/images/' + ${img.tenHinh}}" th:alt="${sp.tenSP}"
					onclick="changeImage(this.src)">
			</div>
		</div>

		<div class="info">
			<h2 th:text="${sp.tenSP}"></h2>
			<p class="price"
				th:text="${#numbers.formatDecimal(sp.donGia,0,'COMMA',0,'POINT')} + ' ƒë'"></p>
			<p class="desc" th:text="${sp.moTa}"></p>

			<div class="buttons">
				<form th:action="@{/giohang/them}" method="post">
					<input type="hidden" name="maSP" th:value="${sp.maSP}"> <input
						type="hidden" name="maKH" th:value="${session.maKH}"> <input
						type="hidden" name="soLuong" value="1">
					<button type="submit" class="btn cart">üõí Th√™m gi·ªè</button>
				</form>

				<form th:action="@{/giohang/muangay}" method="post">
					<input type="hidden" name="maSP" th:value="${sp.maSP}"> <input
						type="hidden" name="maKH" th:value="${session.maKH}"> <input
						type="hidden" name="soLuong" value="1">
					<button type="submit" class="btn buy">‚ö° Mua ngay</button>
				</form>
			</div>

			<!-- CHIA S·∫∫ -->
			<div class="share-box">
				<span>Chia s·∫ª:</span> <a href="#" class="share fb"
					th:attr="onclick='shareFB(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'">
					<img src="/images/icon_fb.png" alt="Facebook">
				</a> <a href="#" class="share tiktok"
					th:attr="onclick='shareTikTok(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'">
					<img src="/images/icon_tiktok.png" alt="TikTok">
				</a> <span class="copy-link"
					th:data-url="@{'/sanpham/chi-tiet/' + ${sp.maSP}}"
					onclick="copyLink(this)">üìã Sao ch√©p link</span>
			</div>
		</div>
	</section>
	<!-- ==== SCRIPT ==== -->
	<script>
    // ƒê·ªïi ·∫£nh ch√≠nh
    function changeImage(src) {
      document.getElementById("mainImage").src = src;
    }

    // Copy link
    function copyLink(el) {
      const url = window.location.origin + el.getAttribute("data-url");
      navigator.clipboard.writeText(url);
      alert("‚úÖ ƒê√£ sao ch√©p li√™n k·∫øt s·∫£n ph·∫©m:\n" + url);
    }

    // Chia s·∫ª Facebook
    function shareFB(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.facebook.com/sharer/sharer.php?u=" + encoded, "_blank", "width=600,height=500");
    }

    // Chia s·∫ª TikTok
    function shareTikTok(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.tiktok.com/upload?lang=vi-VN&url=" + encoded, "_blank", "width=800,height=600");
    }
  </script>
  </section>
</body>
</html>
