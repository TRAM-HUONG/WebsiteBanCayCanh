<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- ğŸŒ¿ SEO -->
<title
	th:text="${sp.tenSP} + ' | ThiÃªn NhiÃªn Garden - CÃ¢y Cáº£nh & Hoa TÆ°Æ¡i'">Chi
	tiáº¿t sáº£n pháº©m</title>
<meta name="description" th:content="${sp.moTa}">
<meta name="keywords"
	content="cÃ¢y cáº£nh, hoa tÆ°Æ¡i, cÃ¢y phong thá»§y, cÃ¢y Ä‘á»ƒ bÃ n, cÃ¢y vÄƒn phÃ²ng, phÃ¢n bÃ³n, ThiÃªn NhiÃªn Garden">
<meta name="author" content="NhÃ³m Java Spring Boot">

<!-- ğŸŒ¸ OPEN GRAPH -->
<meta property="og:type" content="product">
<meta property="og:locale" content="vi_VN">
<meta property="og:site_name" content="ThiÃªn NhiÃªn Garden">
<meta property="og:title" th:content="${sp.tenSP}">
<meta property="og:description" th:content="${sp.moTa}">
<meta property="og:image"
	th:content="@{'http://localhost:8080/images/' + ${sp.anhChinh}}">
<meta property="og:url"
	th:content="@{'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP}}">
<!-- Google tag (gtag.js) -->
<script async
	src="https://www.googletagmanager.com/gtag/js?id=G-WRE8MBQ5W6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WRE8MBQ5W6');
</script>
<!-- âœ… CSS -->
<link rel="stylesheet" th:href="@{/css/chitiet.css}">
<link
	href="https://fonts.googleapis.com/css2?family=Parisienne&family=Quicksand:wght@400;500;600;700&display=swap"
	rel="stylesheet">
</head>

<body>
	<!-- ==== HEADER ==== -->
	<header class="hdr">
		<div class="hdr-left">
			<a href="/" class="logo"> <img src="/images/logo.jpg"
				alt="Logo ThiÃªn NhiÃªn Garden" class="logo-img">
				<h1>ThiÃªn NhiÃªn Garden</h1>
			</a>
			<nav class="hnav">
				<a href="/">Trang chá»§</a> <a href="/sanpham" class="active">Sáº£n
					pháº©m</a> <a th:href="@{/giohang(maKH=${session.maKH})}">Giá» hÃ ng</a> <a
					href="/gioithieu">Giá»›i thiá»‡u</a> <a href="/lienhe">LiÃªn há»‡</a>
			</nav>
		</div>

		<form class="search" method="get" action="/sanpham">
			<input type="text" name="keyword" placeholder="TÃ¬m kiáº¿m sáº£n pháº©m...">
			<button type="submit">TÃ¬m</button>
		</form>

		<div class="hdr-right">
			<a th:if="${session.tenDangNhap == null}" href="/dangnhap"
				class="login-link">ÄÄƒng nháº­p</a>
			<div th:if="${session.tenDangNhap != null}" class="user-info">
				<div class="avatar"
					th:text="${#strings.substring(session.tenDangNhap,0,1).toUpperCase()}"></div>
				<span class="username" th:text="${session.tenDangNhap}"></span> <a
					href="/dangxuat" class="logout">ÄÄƒng xuáº¥t</a>
			</div>
		</div>
	</header>

	<!-- ==== BANNER ==== -->
	<section class="slider">
		<div class="slides">
			<img src="/images/banner1.jpg" class="active"
				alt="CÃ¢y cáº£nh phong thá»§y"> <img src="/images/banner2.jpg"
				alt="Hoa tÆ°Æ¡i táº·ng ngÆ°á»i thÃ¢n"> <img src="/images/banner3.jpg"
				alt="PhÃ¢n bÃ³n & phá»¥ kiá»‡n lÃ m vÆ°á»n">
		</div>
		<div class="dots">
			<span class="dot active"></span> <span class="dot"></span> <span
				class="dot"></span>
		</div>
	</section>

	<!-- ==== CHI TIáº¾T Sáº¢N PHáº¨M ==== -->
	<section class="product-detail">
		<div class="gallery">
			<img id="mainImage" class="main-img"
				th:src="@{'/images/' + ${sp.anhChinh}}" th:alt="${sp.tenSP}">
			<div class="thumbs">
				<img class="thumb-small" th:each="img : ${hinhAnhs}"
					th:src="@{'/images/' + ${img.tenHinh}}" th:alt="${sp.tenSP}"
					onclick="changeImage(this.src)">
			</div>
		</div>

		<div class="info">
			<h2 th:text="${sp.tenSP}"></h2>
			<p class="price"
				th:text="${#numbers.formatDecimal(sp.donGia,0,'COMMA',0,'POINT')} + ' Ä‘'"></p>
			<p class="desc" th:text="${sp.moTa}"></p>

			<div class="buttons">
				<form th:action="@{/giohang/them}" method="post">
					<input type="hidden" name="maSP" th:value="${sp.maSP}"> <input
						type="hidden" name="maKH" th:value="${session.maKH}"> <input
						type="hidden" name="soLuong" value="1">
					<button type="submit" class="btn cart">ğŸ›’ ThÃªm giá»</button>
				</form>

				<form th:action="@{/giohang/muangay}" method="post">
					<input type="hidden" name="maSP" th:value="${sp.maSP}"> <input
						type="hidden" name="maKH" th:value="${session.maKH}"> <input
						type="hidden" name="soLuong" value="1">
					<button type="submit" class="btn buy">âš¡ Mua ngay</button>
				</form>
			</div>

			<!-- CHIA Sáºº -->
			<div class="share-box">
				<span>Chia sáº»:</span> <a href="#" class="share fb"
					th:attr="onclick='shareFB(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'">
					<img src="/images/icon_fb.png" alt="Facebook">
				</a> <a href="#" class="share tiktok"
					th:attr="onclick='shareTikTok(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'">
					<img src="/images/icon_tiktok.png" alt="TikTok">
				</a> <span class="copy-link"
					th:data-url="@{'/sanpham/chi-tiet/' + ${sp.maSP}}"
					onclick="copyLink(this)">ğŸ“‹ Sao chÃ©p link</span>
			</div>
		</div>
	</section>

	<!-- ==== FOOTER ==== -->
	<footer class="ftr">
		Â© 2025 ThiÃªn NhiÃªn Garden ğŸŒ± | <a
			href="mailto:nguyentramhuong22@gmail.com">LiÃªn há»‡</a>
	</footer>

	<!-- ==== SCRIPT ==== -->
	<script>
    // Äá»•i áº£nh chÃ­nh
    function changeImage(src) {
      document.getElementById("mainImage").src = src;
    }

    // Copy link
    function copyLink(el) {
      const url = window.location.origin + el.getAttribute("data-url");
      navigator.clipboard.writeText(url);
      alert("âœ… ÄÃ£ sao chÃ©p liÃªn káº¿t sáº£n pháº©m:\n" + url);
    }

    // Chia sáº» Facebook
    function shareFB(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.facebook.com/sharer/sharer.php?u=" + encoded, "_blank", "width=600,height=500");
    }

    // Chia sáº» TikTok
    function shareTikTok(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.tiktok.com/upload?lang=vi-VN&url=" + encoded, "_blank", "width=800,height=600");
    }

    // Slide banner
    let index = 0;
    const slides = document.querySelectorAll('.slides img');
    const dots = document.querySelectorAll('.dot');
    function showSlide(i){
      slides.forEach((img,n)=>img.classList.toggle('active',n===i));
      dots.forEach((d,n)=>d.classList.toggle('active',n===i));
    }
    function nextSlide(){index=(index+1)%slides.length;showSlide(index);}
    dots.forEach((dot,i)=>dot.addEventListener('click',()=>{index=i;showSlide(index);}));
    setInterval(nextSlide,4000);
  </script>
</body>
</html>
