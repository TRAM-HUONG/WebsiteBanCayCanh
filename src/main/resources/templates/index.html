<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- ğŸŒ¸ SEO -->
  <title>ğŸŒ¿ Website CÃ¢y Cáº£nh & Hoa TÆ°Æ¡i | Trang chá»§</title>
  <meta name="description"
        content="Website bÃ¡n cÃ¢y cáº£nh, hoa tÆ°Æ¡i, phÃ¢n bÃ³n vÃ  phá»¥ kiá»‡n lÃ m vÆ°á»n. Giao hÃ ng toÃ n quá»‘c, cÃ¢y Ä‘áº¹p, giÃ¡ tá»‘t.">
  <meta name="keywords"
        content="cÃ¢y cáº£nh, hoa tÆ°Æ¡i, cÃ¢y phong thá»§y, cÃ¢y kim ngÃ¢n, cÃ¢y phÃº quÃ½, phÃ¢n bÃ³n, cÃ¢y Ä‘á»ƒ bÃ n, cÃ¢y vÄƒn phÃ²ng">
  <meta name="author" content="NhÃ³m Java Spring Boot">

  <!-- ğŸŒ¿ OPEN GRAPH CHUNG -->
  <meta property="og:title" content="Website CÃ¢y Cáº£nh & Hoa TÆ°Æ¡i - Trang chá»§">
  <meta property="og:description" content="KhÃ¡m phÃ¡ cÃ¢y phong thá»§y, hoa tÆ°Æ¡i vÃ  phÃ¢n bÃ³n cháº¥t lÆ°á»£ng cao.">
  <meta property="og:image" content="http://localhost:8080/images/banner1.jpg">
  <meta property="og:url" content="http://localhost:8080/">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="vi_VN">

  <!-- âœ… CSS -->
  <link rel="stylesheet" th:href="@{/css/index.css}">
  <link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Quicksand:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
  <!-- ==== HEADER ==== -->
  <header class="hdr">
    <div class="hdr-left">
      <a href="/" class="logo">
        <img src="/images/logo.jpg" alt="Logo CÃ¢y Cáº£nh" class="logo-img">
        <h1>ThiÃªn NhiÃªn Garden</h1>
      </a>
      <nav class="hnav">
        <a href="/" class="active">Trang chá»§</a>
        <a href="/sanpham">Sáº£n pháº©m</a>
        <a th:href="@{/giohang(maKH=${session.maKH})}">Giá» hÃ ng</a>
        <a href="/gioithieu">Giá»›i thiá»‡u</a>
        <a href="/lienhe">LiÃªn há»‡</a>
      </nav>
    </div>

    <form class="search" method="get" action="/sanpham">
      <input type="text" name="keyword" placeholder="TÃ¬m kiáº¿m sáº£n pháº©m...">
      <button type="submit">TÃ¬m</button>
    </form>

    <div class="hdr-right">
      <a th:if="${session.tenDangNhap == null}" href="/dangnhap" class="login-link">ÄÄƒng nháº­p</a>
      <div th:if="${session.tenDangNhap != null}" class="user-info">
        <div class="avatar" th:text="${#strings.substring(session.tenDangNhap,0,1).toUpperCase()}"></div>
        <span class="username" th:text="${session.tenDangNhap}"></span>
        <a href="/dangxuat" class="logout">ÄÄƒng xuáº¥t</a>
      </div>
    </div>
  </header>

  <!-- ==== BANNER ==== -->
  <section class="slider">
    <div class="slides">
      <img src="/images/banner1.jpg" class="active" alt="CÃ¢y cáº£nh phong thá»§y">
      <img src="/images/banner2.jpg" alt="Hoa tÆ°Æ¡i táº·ng ngÆ°á»i thÃ¢n">
      <img src="/images/banner3.jpg" alt="PhÃ¢n bÃ³n & phá»¥ kiá»‡n lÃ m vÆ°á»n">
    </div>
    <div class="dots">
      <span class="dot active"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
  </section>

  <!-- ==== Sáº¢N PHáº¨M ==== -->
  <h2 class="page-title">ğŸŒ¿ Sáº£n pháº©m ná»•i báº­t ğŸŒ¸</h2>
  <p class="page-sub">Mang thiÃªn nhiÃªn xanh Ä‘áº¿n khÃ´ng gian sá»‘ng cá»§a báº¡n</p>

  <section class="grid">
    <article class="item" th:each="sp : ${sanPhamNoiBat}">
      <a th:href="@{'/sanpham/chi-tiet/' + ${sp.maSP}}">
        <img class="thumb" th:src="@{'/images/' + ${sp.anhChinh}}" th:alt="${sp.tenSP}">
      </a>

      <h3 class="name">
        <a th:href="@{'/sanpham/chi-tiet/' + ${sp.maSP}}" th:text="${sp.tenSP}">TÃªn sáº£n pháº©m</a>
      </h3>

      <div class="price" th:text="${#numbers.formatDecimal(sp.donGia,0,'COMMA',0,'POINT')} + ' Ä‘'">0 Ä‘</div>

      <div class="btn-group">
        <form th:action="@{/giohang/them}" method="post">
          <input type="hidden" name="maSP" th:value="${sp.maSP}">
          <input type="hidden" name="maKH" th:value="${session.maKH}">
          <input type="hidden" name="soLuong" value="1">
          <button type="submit" class="btn cart">ğŸ›’ ThÃªm giá»</button>
        </form>

        <form th:action="@{/giohang/muangay}" method="post">
          <input type="hidden" name="maSP" th:value="${sp.maSP}">
          <input type="hidden" name="maKH" th:value="${session.maKH}">
          <input type="hidden" name="soLuong" value="1">
          <button type="submit" class="btn buy">âš¡ Mua ngay</button>
        </form>
      </div>

      <!-- ==== CHIA Sáºº ==== -->
      <div class="share-box">
        <span>Chia sáº»: </span>

        <!-- âœ… Facebook -->
        <a href="#" class="share fb"
           th:attr="onclick='shareFB(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'"
           title="Chia sáº» sáº£n pháº©m lÃªn Facebook">
          <img src="/images/icon_fb.png" alt="Facebook">
        </a>

        <!-- âœ… TikTok -->
        <a href="#" class="share tiktok"
           th:attr="onclick='shareTikTok(\'http://localhost:8080/sanpham/chi-tiet/' + ${sp.maSP} + '\')'"
           title="Chia sáº» sáº£n pháº©m lÃªn TikTok">
          <img src="/images/icon_tiktok.png" alt="TikTok">
        </a>

        <!-- âœ… Copy link -->
        <span class="copy-link"
              th:data-url="@{'/sanpham/chi-tiet/' + ${sp.maSP}}"
              onclick="copyLink(this)">ğŸ“‹ Sao chÃ©p link</span>
      </div>
    </article>
  </section>

  <div th:if="${#lists.isEmpty(sanPhamNoiBat)}"
       style="text-align: center; margin: 20px;">ChÆ°a cÃ³ sáº£n pháº©m ná»•i báº­t.</div>

  <!-- ==== FOOTER ==== -->
  <footer class="ftr">
    Â© 2025 Website CÃ¢y Cáº£nh - Thiáº¿t káº¿ bá»Ÿi <b>NhÃ³m Java</b> ğŸŒ± |
    <a href="mailto:nguyentramhuong22@gmail.com">LiÃªn há»‡</a>
  </footer>

  <!-- ==== SCRIPT ==== -->
  <script>
    // âœ… Copy link
    function copyLink(el) {
      const url = window.location.origin + el.getAttribute("data-url");
      navigator.clipboard.writeText(url);
      alert("âœ… ÄÃ£ sao chÃ©p liÃªn káº¿t sáº£n pháº©m:\n" + url + "\n\nHÃ£y dÃ¡n vÃ o Facebook, TikTok hoáº·c gá»­i báº¡n bÃ¨!");
    }

    // âœ… Facebook Share (Popup)
    function shareFB(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.facebook.com/sharer/sharer.php?u=" + encoded,
                  "_blank",
                  "width=600,height=500");
    }

    // âœ… TikTok Share (má»Ÿ upload kÃ¨m link)
    function shareTikTok(link) {
      const encoded = encodeURIComponent(link);
      window.open("https://www.tiktok.com/upload?lang=vi-VN&url=" + encoded,
                  "_blank",
                  "width=800,height=600");
    }

    // âœ… Slide banner
    let index = 0;
    const slides = document.querySelectorAll('.slides img');
    const dots = document.querySelectorAll('.dot');
    function showSlide(i) {
      slides.forEach((img, n) => img.classList.toggle('active', n === i));
      dots.forEach((d, n) => d.classList.toggle('active', n === i));
    }
    function nextSlide() {
      index = (index + 1) % slides.length;
      showSlide(index);
    }
    dots.forEach((dot, i) => dot.addEventListener('click', () => { index = i; showSlide(index); }));
    setInterval(nextSlide, 4000);
  </script>
</body>
</html>
